<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>react 17 RC版本特性介绍 | szx的前端博客</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="专注前端">
    
    <link rel="preload" href="/szxblog-demo/assets/css/0.styles.bb1aa129.css" as="style"><link rel="preload" href="/szxblog-demo/assets/js/app.e2c00437.js" as="script"><link rel="preload" href="/szxblog-demo/assets/js/2.8f1423a4.js" as="script"><link rel="preload" href="/szxblog-demo/assets/js/126.d37e314f.js" as="script"><link rel="prefetch" href="/szxblog-demo/assets/js/10.f16ead29.js"><link rel="prefetch" href="/szxblog-demo/assets/js/100.8cadd01d.js"><link rel="prefetch" href="/szxblog-demo/assets/js/101.a4878c9d.js"><link rel="prefetch" href="/szxblog-demo/assets/js/102.991e43a1.js"><link rel="prefetch" href="/szxblog-demo/assets/js/103.7d14ce32.js"><link rel="prefetch" href="/szxblog-demo/assets/js/104.d890ed53.js"><link rel="prefetch" href="/szxblog-demo/assets/js/105.bcd4ee5b.js"><link rel="prefetch" href="/szxblog-demo/assets/js/106.4518dab2.js"><link rel="prefetch" href="/szxblog-demo/assets/js/107.db11e77b.js"><link rel="prefetch" href="/szxblog-demo/assets/js/108.cc1b835b.js"><link rel="prefetch" href="/szxblog-demo/assets/js/109.79708b6d.js"><link rel="prefetch" href="/szxblog-demo/assets/js/11.b2e33f60.js"><link rel="prefetch" href="/szxblog-demo/assets/js/110.fe6a2f06.js"><link rel="prefetch" href="/szxblog-demo/assets/js/111.d68806ae.js"><link rel="prefetch" href="/szxblog-demo/assets/js/112.0ac71cc1.js"><link rel="prefetch" href="/szxblog-demo/assets/js/113.4a09aadd.js"><link rel="prefetch" href="/szxblog-demo/assets/js/114.963a5822.js"><link rel="prefetch" href="/szxblog-demo/assets/js/115.1aad30ca.js"><link rel="prefetch" href="/szxblog-demo/assets/js/116.12dfadff.js"><link rel="prefetch" href="/szxblog-demo/assets/js/117.dd997115.js"><link rel="prefetch" href="/szxblog-demo/assets/js/118.4f5c2734.js"><link rel="prefetch" href="/szxblog-demo/assets/js/119.5e4017d2.js"><link rel="prefetch" href="/szxblog-demo/assets/js/12.39e4e465.js"><link rel="prefetch" href="/szxblog-demo/assets/js/120.1d59b549.js"><link rel="prefetch" href="/szxblog-demo/assets/js/121.46cb657a.js"><link rel="prefetch" href="/szxblog-demo/assets/js/122.ebd8bc25.js"><link rel="prefetch" href="/szxblog-demo/assets/js/123.e3995884.js"><link rel="prefetch" href="/szxblog-demo/assets/js/124.843940bf.js"><link rel="prefetch" href="/szxblog-demo/assets/js/125.e05870f4.js"><link rel="prefetch" href="/szxblog-demo/assets/js/127.144f4e65.js"><link rel="prefetch" href="/szxblog-demo/assets/js/128.317156a7.js"><link rel="prefetch" href="/szxblog-demo/assets/js/129.e6323ab6.js"><link rel="prefetch" href="/szxblog-demo/assets/js/13.4a7ec971.js"><link rel="prefetch" href="/szxblog-demo/assets/js/130.9fad7606.js"><link rel="prefetch" href="/szxblog-demo/assets/js/131.b0cb52b7.js"><link rel="prefetch" href="/szxblog-demo/assets/js/132.5f4869e4.js"><link rel="prefetch" href="/szxblog-demo/assets/js/133.f759d537.js"><link rel="prefetch" href="/szxblog-demo/assets/js/134.f81e482f.js"><link rel="prefetch" href="/szxblog-demo/assets/js/135.8b76bf3a.js"><link rel="prefetch" href="/szxblog-demo/assets/js/136.ec7497a6.js"><link rel="prefetch" href="/szxblog-demo/assets/js/137.1c138540.js"><link rel="prefetch" href="/szxblog-demo/assets/js/138.757a6d32.js"><link rel="prefetch" href="/szxblog-demo/assets/js/139.b64fe6dd.js"><link rel="prefetch" href="/szxblog-demo/assets/js/14.9bc2db88.js"><link rel="prefetch" href="/szxblog-demo/assets/js/140.8e37e5b2.js"><link rel="prefetch" href="/szxblog-demo/assets/js/141.b5039787.js"><link rel="prefetch" href="/szxblog-demo/assets/js/142.77101e82.js"><link rel="prefetch" href="/szxblog-demo/assets/js/143.ff805ccd.js"><link rel="prefetch" href="/szxblog-demo/assets/js/144.4ad37531.js"><link rel="prefetch" href="/szxblog-demo/assets/js/145.304b1b9e.js"><link rel="prefetch" href="/szxblog-demo/assets/js/146.4600c2a5.js"><link rel="prefetch" href="/szxblog-demo/assets/js/147.a36d58c2.js"><link rel="prefetch" href="/szxblog-demo/assets/js/148.6889700a.js"><link rel="prefetch" href="/szxblog-demo/assets/js/149.105878b7.js"><link rel="prefetch" href="/szxblog-demo/assets/js/15.4d9798a0.js"><link rel="prefetch" href="/szxblog-demo/assets/js/150.cf5bfd3f.js"><link rel="prefetch" href="/szxblog-demo/assets/js/151.86e5595c.js"><link rel="prefetch" href="/szxblog-demo/assets/js/152.3c259509.js"><link rel="prefetch" href="/szxblog-demo/assets/js/153.499607de.js"><link rel="prefetch" href="/szxblog-demo/assets/js/154.90874a75.js"><link rel="prefetch" href="/szxblog-demo/assets/js/155.4cd7b50f.js"><link rel="prefetch" href="/szxblog-demo/assets/js/156.6acd428c.js"><link rel="prefetch" href="/szxblog-demo/assets/js/16.def8c8a5.js"><link rel="prefetch" href="/szxblog-demo/assets/js/17.14956b0e.js"><link rel="prefetch" href="/szxblog-demo/assets/js/18.b6609ccd.js"><link rel="prefetch" href="/szxblog-demo/assets/js/19.3f2404b2.js"><link rel="prefetch" href="/szxblog-demo/assets/js/20.904beb92.js"><link rel="prefetch" href="/szxblog-demo/assets/js/21.aeee3703.js"><link rel="prefetch" href="/szxblog-demo/assets/js/22.fe438878.js"><link rel="prefetch" href="/szxblog-demo/assets/js/23.d8da336b.js"><link rel="prefetch" href="/szxblog-demo/assets/js/24.250498f2.js"><link rel="prefetch" href="/szxblog-demo/assets/js/25.22a76a93.js"><link rel="prefetch" href="/szxblog-demo/assets/js/26.d08fabd4.js"><link rel="prefetch" href="/szxblog-demo/assets/js/27.a5b15e7c.js"><link rel="prefetch" href="/szxblog-demo/assets/js/28.d047c227.js"><link rel="prefetch" href="/szxblog-demo/assets/js/29.e067aba3.js"><link rel="prefetch" href="/szxblog-demo/assets/js/3.4a4dea6a.js"><link rel="prefetch" href="/szxblog-demo/assets/js/30.a4cb4a9a.js"><link rel="prefetch" href="/szxblog-demo/assets/js/31.9cc73361.js"><link rel="prefetch" href="/szxblog-demo/assets/js/32.1551ca83.js"><link rel="prefetch" href="/szxblog-demo/assets/js/33.2f9aa824.js"><link rel="prefetch" href="/szxblog-demo/assets/js/34.62952cfb.js"><link rel="prefetch" href="/szxblog-demo/assets/js/35.dad7516d.js"><link rel="prefetch" href="/szxblog-demo/assets/js/36.bf7157c4.js"><link rel="prefetch" href="/szxblog-demo/assets/js/37.304a1cd2.js"><link rel="prefetch" href="/szxblog-demo/assets/js/38.6490f3d9.js"><link rel="prefetch" href="/szxblog-demo/assets/js/39.08e18c05.js"><link rel="prefetch" href="/szxblog-demo/assets/js/4.0b45e3e3.js"><link rel="prefetch" href="/szxblog-demo/assets/js/40.091f41cc.js"><link rel="prefetch" href="/szxblog-demo/assets/js/41.553cae9a.js"><link rel="prefetch" href="/szxblog-demo/assets/js/42.e5a8f335.js"><link rel="prefetch" href="/szxblog-demo/assets/js/43.8a1233c4.js"><link rel="prefetch" href="/szxblog-demo/assets/js/44.d66aa0af.js"><link rel="prefetch" href="/szxblog-demo/assets/js/45.4ec2ac39.js"><link rel="prefetch" href="/szxblog-demo/assets/js/46.6de0879e.js"><link rel="prefetch" href="/szxblog-demo/assets/js/47.192a18b2.js"><link rel="prefetch" href="/szxblog-demo/assets/js/48.6ab2ae0b.js"><link rel="prefetch" href="/szxblog-demo/assets/js/49.3e7963e6.js"><link rel="prefetch" href="/szxblog-demo/assets/js/5.033e198f.js"><link rel="prefetch" href="/szxblog-demo/assets/js/50.a0a03c35.js"><link rel="prefetch" href="/szxblog-demo/assets/js/51.0d2cbfe9.js"><link rel="prefetch" href="/szxblog-demo/assets/js/52.15164a8d.js"><link rel="prefetch" href="/szxblog-demo/assets/js/53.34bd92b6.js"><link rel="prefetch" href="/szxblog-demo/assets/js/54.aab05585.js"><link rel="prefetch" href="/szxblog-demo/assets/js/55.ecba2087.js"><link rel="prefetch" href="/szxblog-demo/assets/js/56.3c2504c8.js"><link rel="prefetch" href="/szxblog-demo/assets/js/57.802af9b6.js"><link rel="prefetch" href="/szxblog-demo/assets/js/58.c475375a.js"><link rel="prefetch" href="/szxblog-demo/assets/js/59.31a836d2.js"><link rel="prefetch" href="/szxblog-demo/assets/js/6.243d2d74.js"><link rel="prefetch" href="/szxblog-demo/assets/js/60.8a892df5.js"><link rel="prefetch" href="/szxblog-demo/assets/js/61.c2bde899.js"><link rel="prefetch" href="/szxblog-demo/assets/js/62.687e89b4.js"><link rel="prefetch" href="/szxblog-demo/assets/js/63.526d56d4.js"><link rel="prefetch" href="/szxblog-demo/assets/js/64.90076339.js"><link rel="prefetch" href="/szxblog-demo/assets/js/65.48a56802.js"><link rel="prefetch" href="/szxblog-demo/assets/js/66.f5339f49.js"><link rel="prefetch" href="/szxblog-demo/assets/js/67.63db5c44.js"><link rel="prefetch" href="/szxblog-demo/assets/js/68.436134dd.js"><link rel="prefetch" href="/szxblog-demo/assets/js/69.7c87a09b.js"><link rel="prefetch" href="/szxblog-demo/assets/js/7.c1c64325.js"><link rel="prefetch" href="/szxblog-demo/assets/js/70.f77a5e7f.js"><link rel="prefetch" href="/szxblog-demo/assets/js/71.21dc29e2.js"><link rel="prefetch" href="/szxblog-demo/assets/js/72.87cf2239.js"><link rel="prefetch" href="/szxblog-demo/assets/js/73.4cea3242.js"><link rel="prefetch" href="/szxblog-demo/assets/js/74.32b5d7d2.js"><link rel="prefetch" href="/szxblog-demo/assets/js/75.b1ed8ded.js"><link rel="prefetch" href="/szxblog-demo/assets/js/76.81b226bc.js"><link rel="prefetch" href="/szxblog-demo/assets/js/77.ed4d0c4e.js"><link rel="prefetch" href="/szxblog-demo/assets/js/78.90521550.js"><link rel="prefetch" href="/szxblog-demo/assets/js/79.1664cd3f.js"><link rel="prefetch" href="/szxblog-demo/assets/js/8.f59080dd.js"><link rel="prefetch" href="/szxblog-demo/assets/js/80.4792b8a8.js"><link rel="prefetch" href="/szxblog-demo/assets/js/81.96f7a53e.js"><link rel="prefetch" href="/szxblog-demo/assets/js/82.763974fd.js"><link rel="prefetch" href="/szxblog-demo/assets/js/83.48bb4590.js"><link rel="prefetch" href="/szxblog-demo/assets/js/84.3b365bc6.js"><link rel="prefetch" href="/szxblog-demo/assets/js/85.705ddf29.js"><link rel="prefetch" href="/szxblog-demo/assets/js/86.7d8aeacf.js"><link rel="prefetch" href="/szxblog-demo/assets/js/87.4086e29b.js"><link rel="prefetch" href="/szxblog-demo/assets/js/88.8a8c76de.js"><link rel="prefetch" href="/szxblog-demo/assets/js/89.f9dc7fd3.js"><link rel="prefetch" href="/szxblog-demo/assets/js/9.d75d0d70.js"><link rel="prefetch" href="/szxblog-demo/assets/js/90.b4a00719.js"><link rel="prefetch" href="/szxblog-demo/assets/js/91.852f9720.js"><link rel="prefetch" href="/szxblog-demo/assets/js/92.83f5a96e.js"><link rel="prefetch" href="/szxblog-demo/assets/js/93.c6bfc105.js"><link rel="prefetch" href="/szxblog-demo/assets/js/94.581e0e89.js"><link rel="prefetch" href="/szxblog-demo/assets/js/95.9fb6788d.js"><link rel="prefetch" href="/szxblog-demo/assets/js/96.e78a3c64.js"><link rel="prefetch" href="/szxblog-demo/assets/js/97.9a67fc48.js"><link rel="prefetch" href="/szxblog-demo/assets/js/98.46f07266.js"><link rel="prefetch" href="/szxblog-demo/assets/js/99.87034f0f.js">
    <link rel="stylesheet" href="/szxblog-demo/assets/css/0.styles.bb1aa129.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/szxblog-demo/" class="home-link router-link-active"><!----> <span class="site-name">szx的前端博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端日报" class="dropdown-title"><span class="title">前端日报</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端日报" class="mobile-dropdown-title"><span class="title">前端日报</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/szxblog-demo/dailyFrontReport/2020/06/" class="nav-link">
  202006
</a></li><li class="dropdown-item"><!----> <a href="/szxblog-demo/dailyFrontReport/2020/07/" class="nav-link">
  202007
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术分类" class="dropdown-title"><span class="title">技术分类</span> <span class="arrow down"></span></button> <button type="button" aria-label="技术分类" class="mobile-dropdown-title"><span class="title">技术分类</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/szxblog-demo/tech/js/" class="nav-link router-link-active">
  js
</a></li><li class="dropdown-item"><!----> <a href="/szxblog-demo/tech/css/" class="nav-link">
  css
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="常用站点" class="dropdown-title"><span class="title">常用站点</span> <span class="arrow down"></span></button> <button type="button" aria-label="常用站点" class="mobile-dropdown-title"><span class="title">常用站点</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.jianshu.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  简书
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.im/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://wubaiqing.github.io/zaobao/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  每日时报
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/trending" target="_blank" rel="noopener noreferrer" class="nav-link external">
  技术趋势
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端日报" class="dropdown-title"><span class="title">前端日报</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端日报" class="mobile-dropdown-title"><span class="title">前端日报</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/szxblog-demo/dailyFrontReport/2020/06/" class="nav-link">
  202006
</a></li><li class="dropdown-item"><!----> <a href="/szxblog-demo/dailyFrontReport/2020/07/" class="nav-link">
  202007
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术分类" class="dropdown-title"><span class="title">技术分类</span> <span class="arrow down"></span></button> <button type="button" aria-label="技术分类" class="mobile-dropdown-title"><span class="title">技术分类</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/szxblog-demo/tech/js/" class="nav-link router-link-active">
  js
</a></li><li class="dropdown-item"><!----> <a href="/szxblog-demo/tech/css/" class="nav-link">
  css
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="常用站点" class="dropdown-title"><span class="title">常用站点</span> <span class="arrow down"></span></button> <button type="button" aria-label="常用站点" class="mobile-dropdown-title"><span class="title">常用站点</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.jianshu.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  简书
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.im/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://wubaiqing.github.io/zaobao/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  每日时报
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/trending" target="_blank" rel="noopener noreferrer" class="nav-link external">
  技术趋势
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>react 17 RC版本特性介绍</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/szxblog-demo/tech/js/react/React17%E7%89%B9%E6%80%A7.html#新增特性-无功能特性" class="sidebar-link">新增特性——无功能特性</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/szxblog-demo/tech/js/react/React17%E7%89%B9%E6%80%A7.html#逐步升级" class="sidebar-link">逐步升级</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/szxblog-demo/tech/js/react/React17%E7%89%B9%E6%80%A7.html#更改事件委托" class="sidebar-link">更改事件委托</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/szxblog-demo/tech/js/react/React17%E7%89%B9%E6%80%A7.html#去除事件池" class="sidebar-link">去除事件池</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/szxblog-demo/tech/js/react/React17%E7%89%B9%E6%80%A7.html#副作用清理时机" class="sidebar-link">副作用清理时机</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/szxblog-demo/tech/js/react/React17%E7%89%B9%E6%80%A7.html#解决隐患" class="sidebar-link">解决隐患</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/szxblog-demo/tech/js/react/React17%E7%89%B9%E6%80%A7.html#原生组件栈" class="sidebar-link">原生组件栈</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/szxblog-demo/tech/js/react/React17%E7%89%B9%E6%80%A7.html#移除私有导出" class="sidebar-link">移除私有导出</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/szxblog-demo/tech/js/react/React17%E7%89%B9%E6%80%A7.html#对标浏览器" class="sidebar-link">对标浏览器</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="react-17-rc版本特性介绍"><a href="#react-17-rc版本特性介绍" class="header-anchor">#</a> react 17 RC版本特性介绍</h1> <p>文档地址：https://github.com/reactjs/reactjs.org/blob/c30ff1e39b9fca747198c028a33300656a90e612/content/blog/2020-08-10-react-v17-rc.md</p> <h2 id="新增特性-无功能特性"><a href="#新增特性-无功能特性" class="header-anchor">#</a> 新增特性——无功能特性</h2> <p>React 17不太寻常，因为它没有添加任何面向开发人员的新功能，而主要侧重于升级简化React本身。
我们正在积极开发React的新功能，但它们并不属于此版本。React 17是我们进行深度推广战略的关键所在。
此版本之所以特殊，你可以认为React 17是一个过渡版，它会使得由一个React版本管理树嵌入到另一个React版本管理树中时会更加安全。</p> <h2 id="逐步升级"><a href="#逐步升级" class="header-anchor">#</a> 逐步升级</h2> <p>React 17开始支持逐步升级React版本。当从React 15升到16时(或者从 React 16升到17时)，通常会一次升级整个应用程序。这适用于大部分应用程序。但是，如果代码库是在几年前编写的，并且并没有得到很好的维护，那么升级它会变得越来越有挑战性。尽管可以在页面上使用两个版本的React，但是直到React 17依然会出现events问题。
为了实现逐步升级，我们需要对React的事件系统进行一些更改。而这些更改可能会对代码产生影响，这也是React 17成为主要版本的原因。实际上，十万个以上的组件中受影响的组件不超过20个，因此我们希望大多数应用程序都可以升级到React 17，而不会产生太多影响。</p> <h2 id="更改事件委托"><a href="#更改事件委托" class="header-anchor">#</a> 更改事件委托</h2> <p>对大多数事件来说，React并不会将它们附加到DOM节点上。相反，React会直接在document节点上为每种事件类型附加一个处理器，这被称为事件委托。除了在大型应用程序上具有性能优势外，它还使添加类似于replaying events这样的新特性变得更容易。</p> <p>自从其发布以来，React就一直自动进行事件委托。当document上触发DOM事件时，React会找出调用的组件，然后 React事件会在组件中向上&quot;冒泡&quot;。但实际上，原生事件已经冒泡出了&quot;document&quot;级别，React是在document中安装的事件处理器。</p> <p>但这就是逐步升级的困难所在。</p> <p>如果页面上有多个React版本，他们都将在顶层注册事件处理器。这会破坏e.stopPropagation() 如果嵌套树结构中阻止了事件冒泡，但外部树依然能接收到它。这会使不同版本React的嵌套变得十分困难。
在React 17中，React将不再向document添加事件处理器。而会将事件处理器附加到渲染React树的根DOM节点中：
在React 16或更早版本中，React会对大多数事件执行document.addEventListener()。React 17将会在底层调用rootNode.addEventListener()。
<img src="2020-08-17-18-10-54.png" alt="react事件绑定变化"></p> <h2 id="去除事件池"><a href="#去除事件池" class="header-anchor">#</a> 去除事件池</h2> <p>因为React在旧浏览器中重用了不同事件的事件对象，以提高性能，并将所有事件字段在它们之前设置为null。在 React 16及更早版本中，使用者必须调用e.persist()才能正确的使用该事件，或者正确读取需要的属性。</p> <p>在 React 17 中，此代码可以按照预期效果执行。旧的事件池优化操作已被完成删除，因此，使用者可以在需要时读取事件字段。</p> <p>这改变了行为，因此我们将其标记为重大更新，但在实践中我们没有看到它在Facebook上造成影响(甚至还修复了一些bug！)。请注意，e.persist()在 React事件对象中仍然可用，只不过没有任何效果罢了。</p> <h2 id="副作用清理时机"><a href="#副作用清理时机" class="header-anchor">#</a> 副作用清理时机</h2> <p>大多数副作用(effect)不需要延迟刷新视图，因此React在屏幕上反映出更新后立即异步执行它们(在极少数情况下，你需要一种副作用来阻止重绘。例如，如果需要获取尺寸和位置，请使用useLayoutEffect)。</p> <p>然而，副作用清理函数(如果存在)在React16中同步运行。我们发现，对于大型应用程序来说，这不是理想选择，因为同步会减缓视图的更新(例如，切换标签)。</p> <p>在React 17中，副作用清理函数会异步执行 —— 如果要卸载组件，则清理会在视图更新后运行。</p> <p>这反映了副作用本身如何更紧密地运行。在极少数情况下，你可能希望依靠同步执行，可以改用useLayoutEffect来代替。</p> <h2 id="解决隐患"><a href="#解决隐患" class="header-anchor">#</a> 解决隐患</h2> <p>例如，如果模块中使用document.addEventListener(...)手动添加了DOM监听，你可能希望能捕获到所有React 事件。在React 16或更早版本中，即使你在React事件处理器中调用e.stopPropagation()，你创建的DOM监听仍会触发，这是因为原生事件已经处于document级别。使用React 17冒泡将被阻止(按需)，因此你的document级别的事件监听不会触发
返回一致的undefined错误以前，React只对class和函数组件执行此操作，但并不会检查forwardRef和memo组件的返回值。这是由于编码错误导致。在React 17中，forwardRef和memo组件的行为会与常规函数组件和class组件保持一致。在返回undefined时会报错</p> <p>你可以将监听转换为使用事件捕获来修复此类代码。为此，你可以将{ capture: true }作为 document.addEventListener的第三个参数传递</p> <h2 id="原生组件栈"><a href="#原生组件栈" class="header-anchor">#</a> 原生组件栈</h2> <p>当你在浏览器中遇到错误时，浏览器会为你提供带有JavaScript函数的名称及位置的堆栈信息。然而JavaScript堆栈通常不足以诊断问题，因为React树的层次结构可能同样重要。你不仅要知道哪个Button抛出了错误，而且还想知道 Button在React树中的哪个位置。</p> <p>为了解决这个问题，当你遇到错误时，从React 16开始会打印&quot;组件栈&quot;信息。尽管如此，它们仍然不如原生的JavaScript堆栈。特别是它们在控制台中不可点击，因为React不知道函数在源代码中的声明位置。此外，它们在生产中几乎无用。不同于常规压缩后的JavaScript堆栈，它们可以通过sourcemap的形式自动恢复到原始函数的位置，而使用React组件栈，在生产环境下必须在堆栈信息和bundle大小间进行选择。</p> <p>在React 17中，使用了不同的机制生成组件堆栈，该机制会将它们与常规的原生JavaScript堆栈缝合在一起。这使得你可以在生产环境中获得完全符号化的React组件堆栈信息。</p> <p>React实现这一点的方式有点非常规。目前，浏览器无法提供获取函数堆栈框架(源文件和位置)的方法。因此，当 React捕获到错误时，将通过组件上述组件内部抛出的临时错误(并捕获)来重建其组件堆栈信息。这会增加崩溃时的性能损失，但每个组件类型只会发生一次。</p> <p>如果你对此感兴趣，可以在这个PR中阅读更多详细信息，但是在大多数情况下，这种机制不会影响你的代码。从使用者的角度来看，新功能就是可以单击组件堆栈(因为它们依赖于本机浏览器堆栈框架)，并且可以像常规JavaScript错误那样在生产中进行解码。</p> <p>构成重大变化的部分是，要使此功能正常工作，React将在捕获错误后在堆栈中重新执行上面某些函数和某些class构造函数的部分。由于渲染函数和class构造函数不应具有副作用(这对于SSR也很重要)，因此这不会造成任何实际问题。</p> <h2 id="移除私有导出"><a href="#移除私有导出" class="header-anchor">#</a> 移除私有导出</h2> <p>最后，值得注意的重大变化是我们删除了一些以前暴露给其他项目的React内部组件。特别是，React Native for Web过去常常依赖于事件系统的某些内部组件，但这种依赖关系很脆弱且经常被破坏。</p> <p>在React 17中，这些私有导出已被移除。据我们所知，React Native for Web是唯一使用它们的项目，它们已经完成了向不依赖那些私有导出函数的其他方法迁移。</p> <p>这意味着旧版本的React Native for Web不会与React 17兼容，但是新版本可以使用它。实际上，并没有太大的变化，因为React Native for Web必须发布新版本以适应其内部React的变化。</p> <p>另外，我们删除了ReactTestUtils.SimulateNative的helper方法。他们从未被记录，没有按照他们名字所暗示的那样去做，也没有处理我们对事件系统所做的更改。如果你想要一种简便的方式来触发测试中原生浏览器的事件，请改用 React Testing Library。</p> <h2 id="对标浏览器"><a href="#对标浏览器" class="header-anchor">#</a> 对标浏览器</h2> <ul><li>onScroll事件不再冒泡，以防止出现一些混淆。</li> <li>React的onFocus和onBlur事件已在底层切换为原生的focusin和focusout事件。它们更接近React现有行为，有时还会提供额外的信息。</li> <li>捕获事件(例如，onClickCapture)现在使用的是实际浏览器中的捕获监听器。</li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">11/17/2020, 9:33:55 AM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/szxblog-demo/assets/js/app.e2c00437.js" defer></script><script src="/szxblog-demo/assets/js/2.8f1423a4.js" defer></script><script src="/szxblog-demo/assets/js/126.d37e314f.js" defer></script>
  </body>
</html>
