(window.webpackJsonp=window.webpackJsonp||[]).push([[151],{374:function(e,t,n){"use strict";n.r(t);var a=n(42),s=Object(a.a)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("h1",{attrs:{id:"flutter插件ios端配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#flutter插件ios端配置"}},[e._v("#")]),e._v(" flutter插件ios端配置")]),e._v(" "),n("ul",[n("li",[e._v("Mac中保错"),n("a",{attrs:{href:"https://www.jianshu.com/p/83baebf049b8",target:"_blank"}},[e._v("CocoaPods")]),e._v(" not installed")])]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("sudo gem install cocoapods\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br")])]),n("ul",[n("li",[n("p",[e._v("双击Runner.xcworkspace（注意事项，启动项目时通过xcworkspace结尾的打开项目）")])]),e._v(" "),n("li",[n("p",[e._v("导入Face-iOSLib-SDK目录到Classes目录下，然后按下图\n"),n("img",{attrs:{src:"importsdk.png",alt:"配置"}})])]),e._v(" "),n("li",[n("p",[e._v("在ios工程中"),n("a",{attrs:{href:"https://www.jianshu.com/p/71a600d300b6",target:"_blank"}},[e._v("Build Phases")]),e._v(" , Complie Sources增加-fno-objc-arc、YYFaceView.m , XMLReader.m , SoudnPlayer.m")])]),e._v(" "),n("li",[n("p",[e._v("Pods目录不存在")])])]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("pod install\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br")])]),n("ul",[n("li",[n("a",{attrs:{href:"https://blog.csdn.net/xisan_10/article/details/102914714?utm_medium=distribute.pc_relevant_t0.none-task-blog-BlogCommendFromMachineLearnPai2-1.nonecase&depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-BlogCommendFromMachineLearnPai2-1.nonecase",target:"_blank"}},[e._v("Command CodeSign failed with a nonzero exit code")])])]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("去除build phases->copy bundle resources的引入的包\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br")])]),n("ul",[n("li",[e._v("在Pods/Podfile中引入需要的包")])]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("  pod 'Face-iOSLib-SDK',      :path=>'Runner/Face-iOSLib-SDK'\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br")])]),n("ul",[n("li",[e._v("在Pods/Development Pods/flutter"),n("em",[e._v("plugin/Pod/flutter")]),e._v("plugin.podspec中引入需要的包")])]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("  s.dependency 'Face-iOSLib-SDK'\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br")])]),n("ul",[n("li",[n("p",[e._v("在ld library not found for -lTCSafe,在项目的build setting中的library search path配置a文件放置的文件夹\n"),n("img",{attrs:{src:"buildsettinglibrarypath.png",alt:""}})])]),e._v(" "),n("li",[n("p",[e._v("在Pods/Development Pods/flutter"),n("em",[e._v("plugin/../../example/ios/.symlinks/plugins/flutter")]),e._v("plugin/ios/Classes/Swift*Plugin.swift中编写相关代码\nhttps://www.jianshu.com/p/b95d95c95f6e")])]),e._v(" "),n("li",[n("p",[e._v("导入object c头文件报错\n"),n("img",{attrs:{src:"%E9%85%8D%E7%BD%AEheaderSearchPath.png",alt:""}})])]),e._v(" "),n("li",[n("p",[e._v("配置bridge的header文件后报错<unknown>:0: error: using bridging headers with framework targets is unsupported\n参考"),n("a",{attrs:{href:"https://blog.csdn.net/cooldragon/article/details/50172649"}},[e._v("Swift +Objective-C混合Framework的一些问题")]),e._v("\n发现添加引入的地方不对，不应该在swift文件里添加，而应该在.h文件中添加")])]),e._v(" "),n("li",[n("p",[e._v("在FlutterbiometricspluginPlugin.h中添加引用后报错Include of non-modular header inside framework module\n参考"),n("a",{attrs:{href:"https://www.jianshu.com/p/d688cb931e28"}},[e._v("自定义的Framework遇到Include of non-modular header inside framework module 'xxx'")]),e._v("将project下的header移入public后编译通过")])]),e._v(" "),n("li",[n("p",[e._v("swift语法报错:Consecutive statements on a line must be separated by ';'")])])]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('error:      String localXML = ""\ncorrect:       var localXML:String? = ""\n')])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br")])]),n("ul",[n("li",[e._v("swift语法报错:Value of optional type 'String?' must be unwrapped to a value of type 'String'")])]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('error:      String localXML = ""\ncorrect:       var localXML:String? = ""\n')])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br")])]),n("ul",[n("li",[e._v("需要调用presentViewController进行页面展示，但是self对象无此方法")])]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("调整NSObject接口为FlutterViewController\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br")])]),n("ul",[n("li",[e._v("present页面不跳转")])]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("调整\n@objc class AppDelegate: FlutterAppDelegate {\n  override func application(\n    _ application: UIApplication,\n    didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?\n  ) -> Bool {\n    GeneratedPluginRegistrant.register(with: self)\n    return super.application(application, didFinishLaunchingWithOptions: launchOptions)\n  }\n    \n}\n\n为\n@objc class AppDelegate: FlutterAppDelegate {\n  var navigationController: UINavigationController?\n  override func application(\n    _ application: UIApplication,\n    didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?\n  ) -> Bool {\n    GeneratedPluginRegistrant.register(with: self)\n    let flutterViewController = FlutterViewController()\n    self.navigationController = UINavigationController(rootViewController: flutterViewController)\n    self.navigationController?.isNavigationBarHidden = true\n\n    self.window = UIWindow(frame: UIScreen.main.bounds)\n    self.window.rootViewController = self.navigationController\n    self.window.makeKeyAndVisible()\n    return super.application(application, didFinishLaunchingWithOptions: launchOptions)\n  }\n    \n  func openNativeUI(uiController: UIViewController) {\n    self.navigationController?.pushViewController(uiController, animated: true)\n  }\n}\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br"),n("span",{staticClass:"line-number"},[e._v("10")]),n("br"),n("span",{staticClass:"line-number"},[e._v("11")]),n("br"),n("span",{staticClass:"line-number"},[e._v("12")]),n("br"),n("span",{staticClass:"line-number"},[e._v("13")]),n("br"),n("span",{staticClass:"line-number"},[e._v("14")]),n("br"),n("span",{staticClass:"line-number"},[e._v("15")]),n("br"),n("span",{staticClass:"line-number"},[e._v("16")]),n("br"),n("span",{staticClass:"line-number"},[e._v("17")]),n("br"),n("span",{staticClass:"line-number"},[e._v("18")]),n("br"),n("span",{staticClass:"line-number"},[e._v("19")]),n("br"),n("span",{staticClass:"line-number"},[e._v("20")]),n("br"),n("span",{staticClass:"line-number"},[e._v("21")]),n("br"),n("span",{staticClass:"line-number"},[e._v("22")]),n("br"),n("span",{staticClass:"line-number"},[e._v("23")]),n("br"),n("span",{staticClass:"line-number"},[e._v("24")]),n("br"),n("span",{staticClass:"line-number"},[e._v("25")]),n("br"),n("span",{staticClass:"line-number"},[e._v("26")]),n("br"),n("span",{staticClass:"line-number"},[e._v("27")]),n("br"),n("span",{staticClass:"line-number"},[e._v("28")]),n("br"),n("span",{staticClass:"line-number"},[e._v("29")]),n("br"),n("span",{staticClass:"line-number"},[e._v("30")]),n("br"),n("span",{staticClass:"line-number"},[e._v("31")]),n("br"),n("span",{staticClass:"line-number"},[e._v("32")]),n("br"),n("span",{staticClass:"line-number"},[e._v("33")]),n("br"),n("span",{staticClass:"line-number"},[e._v("34")]),n("br")])]),n("p",[e._v("结果：运行找不到methodChannel定义的防范，方案验证识别")]),e._v(" "),n("ul",[n("li",[e._v("通过修改method中打开ViewController的方法")])]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('      var localXML:String = "<param><imgWidth>480</imgWidth><imgHeight>640</imgHeight><imgCompress>85</imgCompress><pupilDistMin>80</pupilDistMin><pupilDistMax>170</pupilDistMax><isActived>2</isActived><isAudio>1</isAudio><timeOut>20</timeOut><version>3.0.3</version><deviceIdx>0</deviceIdx><definitionAsk>15</definitionAsk><cryptType>0</cryptType><interfaceType>4</interfaceType><cryptKey>37010519820902167800</cryptKey><action>1</action><headLeft>-20</headLeft><headRight>20</headRight><headLow>-15</headLow><headHigh>15</headHigh><eyeDegree>28</eyeDegree><mouthDegree>35</mouthDegree><outType>0</outType><supportLow>1</supportLow><actionList>128</actionList><actionOrder>*</actionOrder><isLog>1</isLog><mode>1</mode><language>0</language></param>"\n      let eyeFace = EyeCoolFaceLiveController()\n      eyeFace.delegate = self\n      eyeFace.xmlStr = localXML\n      result("iOS " + UIDevice.current.systemVersion)\n      // self.navigationController?.pushViewController(eyeFace, animated: true)\n      self.present(eyeFace,animated: true)\n')])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br")])]),n("ul",[n("li",[n("p",[e._v("Cannot assign to value: 'eyeFace' is a 'let' constant\nswift语法 let声明常量")])]),e._v(" "),n("li",[n("p",[e._v("通过修改method中打开ViewController的方法whose view is not in the window hierarchy!\n方案一："),n("a",{attrs:{href:"https://www.jianshu.com/p/a95ac1cb678e"}},[e._v("需要先进行dismiss")]),e._v("实验无效\n方案二："),n("a",{attrs:{href:"https://segmentfault.com/a/1190000018804821?utm_source=tag-newest"}},[e._v("需要修改AppDelegate")]),e._v("实验无效\n方案三："),n("a",{attrs:{href:"https://www.imooc.com/article/290920"}},[e._v("利用UIWindow")]),e._v("实验可行")])])]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('// 通过UIApplication获取顶层视图，first对应的就是FlutterView\nlet window: UIWindow = UIApplication.shared.windows.first!\nvar localXML:String = "<param><imgWidth>480</imgWidth><imgHeight>640</imgHeight><imgCompress>85</imgCompress><pupilDistMin>80</pupilDistMin><pupilDistMax>170</pupilDistMax><isActived>2</isActived><isAudio>1</isAudio><timeOut>20</timeOut><version>3.0.3</version><deviceIdx>0</deviceIdx><definitionAsk>15</definitionAsk><cryptType>0</cryptType><interfaceType>4</interfaceType><cryptKey>37010519820902167800</cryptKey><action>1</action><headLeft>-20</headLeft><headRight>20</headRight><headLow>-15</headLow><headHigh>15</headHigh><eyeDegree>28</eyeDegree><mouthDegree>35</mouthDegree><outType>0</outType><supportLow>1</supportLow><actionList>128</actionList><actionOrder>*</actionOrder><isLog>1</isLog><mode>1</mode><language>0</language></param>"\nvar eyeFace = EyeCoolFaceLiveController()\neyeFace.delegate = self\n// eyeFace.delegate = window\neyeFace.xmlStr = localXML\n\nwindow.rootViewController?.present(eyeFace, animated: true)\n\nresult("iOS " + UIDevice.current.systemVersion)\nprint("callEyeCoolLiveSingle5")\n')])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br"),n("span",{staticClass:"line-number"},[e._v("10")]),n("br"),n("span",{staticClass:"line-number"},[e._v("11")]),n("br"),n("span",{staticClass:"line-number"},[e._v("12")]),n("br")])]),n("ul",[n("li",[n("p",[e._v("This app has crashed because it attempted to access privacy-sensitive data without a usage description.  The app's Info.plist must contain an NSCameraUsageDescription key with a string value explaining to the user how the app uses this data.\n方案一："),n("a",{attrs:{href:"https://www.jianshu.com/p/83db0b4f0bfe"}},[e._v("修改info.plist配置")])])]),e._v(" "),n("li",[n("p",[e._v("Keyboard cannot present view controllers")])]),e._v(" "),n("li",[n("p",[e._v("uncaught exception 'NSInvalidArgumentException', reason: '*** -[NSURL initFileURLWithPath:]: nil string parameter'，libc++abi.dylib: terminating with uncaught exception of type NSException\n方案：把资源文件导入Runner项目中")])]),e._v(" "),n("li",[n("p",[e._v("找不到模型文件\n方案：把dat和lic文件导入Runner项目中")])]),e._v(" "),n("li",[n("p",[e._v("包名不匹配\n方案：点击project-General修改bundle identifier,由com.example.flutterbiometricspluginExample修改为com.bankcomm.flutterbiometricspluginExample")])])])])}),[],!1,null,null,null);t.default=s.exports}}]);